<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>13 Synchronization</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html,2,frames,index=3,info --> 
<meta name="src" content="OSCMsg.tex"> 
<link rel="stylesheet" type="text/css" href="OSCMsg.css"> 
</head><body 
>
<!--l. 2489--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch14.html" >next</a>] [<a 
href="OSCMsgch12.html" >prev</a>] [<a 
href="OSCMsgch12.html#tailOSCMsgch12.html" >prev-tail</a>] [<a 
href="#tailOSCMsgch13.html">tail</a>] [<a 
href="OSCMsg3.html#OSCMsgch13.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;13</span><br /><a 
 id="x17-8000013"></a>Synchronization</h2>
<!--l. 2492--><p class="noindent" >Synchronization between components is in charge of the static <span 
class="pcrr8tn-">sync </span>node, automatically embedded in each object.
Its address is <span 
class="pcrr8tn-">/ITL/.../</span><span 
class="pcrro8t-">object</span><span 
class="pcrr8tn-">/sync </span>and it supports messages to add or remove a master / slave relation
between components or to query the synchronizations state.
<!--l. 2494--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />A master can naturally have several slaves, but a slave can have several masters as well. In this case, it will be drawn
several times, corresponding to each master&#8217;s space.
<a 
 id="dx17-80001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2503--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">sync</span> <img 
src="OSCMsg90x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-80002"></a>
<a 
 id="dx17-80003"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="ptmb8t-">[1] </span>the <span 
class="pcrr8tn-">slave master </span>form is followed by an optional synchronization mode (see below). It adds a
     slave / master relation between the first and the second component.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[2] </span>the <span 
class="pcrr8tn-">slavemasterdel </span>form removes the specified slave/master relation.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[3] </span>the <span 
class="pcrr8tn-">slave </span>form without <span 
class="pcrr8tn-">master </span>removes all synchronizations with the slave.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[4] </span>the <span 
class="pcrr8tn-">get </span>message is intended to query the synchronization state. The optional parameter is the
     identifier  of  a  component.  The  <span 
class="pcrr8tn-">get </span>message  without  parameter  is  equivalent  to  a  <span 
class="pcrr8tn-">get </span>message
     addressed to each object declared in the <span 
class="pcrr8tn-">sync </span>node.</li></ul>
<a 
 id="dx17-80004"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
                                                                                 

                                                                                 
<!--l. 2518--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">syncIdentifier</span> <img 
src="OSCMsg91x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-80005"></a>
<!--l. 2521--><p class="noindent" >Synchronization identifiers indicates 1) the name of an object or 2) the name of an object associated to a mapping
name. Using the first form (i.e. without explicit mapping name), the system uses the default unnamed mapping (see
section <a 
href="OSCMsgch12.html#x16-7600012.1">12.1<!--tex4ht:ref: mapMsg --></a> p.<a 
href="OSCMsgch12.html#x16-7600012.1">98<!--tex4ht:ref: mapMsg --></a> mappings and named mappings).
<!--l. 2523--><p class="noindent" >Synchronization between components has no effect if any of the required mapping is missing (see table
<a 
href="OSCMsgch12.html#x16-760041">12.1<!--tex4ht:ref: maptable --></a>).
<!--l. 2525--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Synchronizing an object on several masters:
<div class="center" 
>
<!--l. 2528--><p class="noindent" >
<div 
class="colorbox" id="colorbox75"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/myParent/sync mySlave myMaster1;</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/myParent/sync mySlave myMaster2;</span></div></div>
</div>
<!--l. 2530--><p class="noindent" >Synchronizing two objects using a specific mapping (the second object is assumed to be a symbolic score (<span 
class="pcrr8tn-">gmn</span>,
<span 
class="pcrr8tn-">gmnstream </span>or <span 
class="pcrr8tn-">gmnf</span>) which <span 
class="pcrr8tn-">system </span>mapping has been previously requested):
<div class="center" 
>
<!--l. 2531--><p class="noindent" >
<div 
class="colorbox" id="colorbox76"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/myParent/sync mySlave myMaster:system;</span>
</div></div>
</div>
<h3 class="sectionHead"><span class="titlemark">13.1    </span> <a 
 id="x17-8100013.1"></a>Synchronization modes</h3>
<!--l. 2537--><p class="noindent" >Synchronizing a slave component <span 
class="pcrr8tn-">A </span>to a master component <span 
class="pcrr8tn-">B </span>has the following effect:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">A </span>position (x) is modified to match the <span 
class="pcrr8tn-">B </span>time position corresponding to <span 
class="pcrr8tn-">A </span>date.
     </li>
     <li class="itemize">depending  on  the  optional  <span 
class="pcrr8tn-">syncStretch </span>option,  <span 
class="pcrr8tn-">A </span>width  and/or  height  is  modified  to  match  the
     corresponding <span 
class="pcrr8tn-">B </span>dimension (see below).
     </li>
     <li class="itemize">depending on the optional <span 
class="pcrr8tn-">syncPos </span>option, <span 
class="pcrr8tn-">A </span>vertical position (y) is modified. Note that the <span 
class="pcrr8tn-">y </span>position
     remains free and could always be modified using a <span 
class="pcrr8tn-">dy </span>message.
     </li>
     <li class="itemize">if <span 
class="pcrr8tn-">A </span>date has no graphic correspondence in <span 
class="pcrr8tn-">B </span>mapping (the date is not mapped, or out of <span 
class="pcrr8tn-">B </span>mapping
     bounds ), <span 
class="pcrr8tn-">A </span>won&#8217;t be visible.</li></ul>
<a 
 id="dx17-81001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
                                                                                 

                                                                                 
<!--l. 2547--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">syncmode</span> <img 
src="OSCMsg92x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-81002"></a>
<!--l. 2550--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.1    </span> <a 
 id="x17-8200013.1.1"></a>Using the master date</h4>
<a 
 id="dx17-82001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2553--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">syncHow</span> <img 
src="OSCMsg93x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-82002"></a>
<a 
 id="dx17-82003"></a>
<a 
 id="dx17-82004"></a>
<!--l. 2558--><p class="noindent" >The synchronization mode makes use of the master time to graphic mapping to compute the slave position. It may
also use the master current date, depending on the following options:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">relative</span>: the time position where the slave appears is relative to the mapping and to the master
     current date (actually, it shifts the mapping from the master current date). The relative mode is used
     by default.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">absolute</span>: the time position where the slave appears corresponds to the mapping date only.</li></ul>
<!--l. 2564--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />Use of the <span 
class="pcrr8tn-">absolute </span>mode may take sense with nested synchronizations: let&#8217;s consider an object <span 
class="pcrr8tn-">A</span>, slave of <span 
class="pcrr8tn-">B</span>,
which is slave of <span 
class="pcrr8tn-">C</span>. In <span 
class="pcrr8tn-">relative </span>mode and if <span 
class="pcrr8tn-">A </span>and <span 
class="pcrr8tn-">B </span>receive the same <span 
class="pcrr8tn-">clock </span>messages, <span 
class="pcrr8tn-">A </span>will remain at a fixed
position on <span 
class="pcrr8tn-">B </span>although it is moving in time.
<!--l. 2568--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Describing nested synchronizations, the first one using the <span 
class="pcrr8tn-">absolute </span>mode:
<div class="center" 
>
<!--l. 2572--><p class="noindent" >
                                                                                 

                                                                                 
<div 
class="colorbox" id="colorbox77"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/sync slave masterSlave absolute ;</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/sync masterSlave master ;</span></div></div>
</div>
<!--l. 2574--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.2    </span> <a 
 id="x17-8300013.1.2"></a>Synchronizing an object duration</h4>
<a 
 id="dx17-83001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2578--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">syncStretch</span> <img 
src="OSCMsg94x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-83002"></a>
<a 
 id="dx17-83003"></a>
<a 
 id="dx17-83004"></a>
<a 
 id="dx17-83005"></a>
<!--l. 2584--><p class="noindent" >The synchronization stretch mode has the following effect on the slave dimensions:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">h</span>: the slave is horizontally stretched to align its begin and end dates to the corresponding master
     locations.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">v</span>: the slave is vertically stretched to the master map vertical dimension.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">hv</span>: combines the above parameters.</li></ul>
<!--l. 2590--><p class="noindent" >By default, no stretching is applied.
<!--l. 2592--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Synchronizing two objects, aligning the slave duration to the corresponding master space and stretching the slave to
the master map vertical dimension:
<div class="center" 
>
<!--l. 2594--><p class="noindent" >
<div 
class="colorbox" id="colorbox78"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/sync mySlave myMaster hv ;</span>
</div></div>
</div>
                                                                                 

                                                                                 
<!--l. 2597--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.3    </span> <a 
 id="x17-8400013.1.3"></a>Controlling the slave position</h4>
<a 
 id="dx17-84001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2601--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">syncPos</span> <img 
src="OSCMsg95x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx17-84002"></a>
<a 
 id="dx17-84003"></a>
<a 
 id="dx17-84004"></a>
<a 
 id="dx17-84005"></a>
<a 
 id="dx17-84006"></a>
<!--l. 2608--><p class="noindent" >The synchronization position mode has the following effects on the slave <span 
class="pcrr8tn-">y </span>position:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">syncOver</span>: the center of the slave is aligned to the master center.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">syncTop</span>: the bottom of the slave is aligned to the top of the master.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">syncBottom</span>: the top of the slave is aligned to the bottom of the master.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">syncFrame</span>: used to browse the master frame (see the next section).</li></ul>
<!--l. 2615--><p class="noindent" >The default position mode is <span 
class="pcrr8tn-">syncOver</span>. The <span 
class="pcrr8tn-">y </span>attribute of the slave remains available to displacement
(<span 
class="pcrr8tn-">dy</span>).
<!--l. 2617--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />The <span 
class="pcrr8tn-">y </span>position of a synchronized object remains a free attribute. To control this position, you should send <span 
class="pcrr8tn-">dy</span>
messages.
<!--l. 2620--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Synchronizing two objects, aligning the slave duration to the corresponding master space, the slave being below the
master map:
<div class="center" 
>
<!--l. 2622--><p class="noindent" >
<div 
class="colorbox" id="colorbox79"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/sync mySlave myMaster h syncBottom;</span>
</div></div>
</div>
                                                                                 

                                                                                 
<!--l. 2625--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.4    </span> <a 
 id="x17-8500013.1.4"></a>The syncFrame mode</h4>
<!--l. 2628--><p class="noindent" >When the <span 
class="pcrr8tn-">syncFrame </span>mode is used, the slave is placed on the frame of the master. Typically, this frame
corresponds to the object bounding box that is also the object default mapping. For ellipses, arcs,
lines, polygons, the frame corresponds to the border of the object. The frame duration is the object
duration.
<!--l. 2630--><p class="noindent" >Mappings and stretch options are ignored in <span 
class="pcrr8tn-">syncFrame </span>mode.
                                                                                 

                                                                                 
<!--l. 2635--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch14.html" >next</a>] [<a 
href="OSCMsgch12.html" >prev</a>] [<a 
href="OSCMsgch12.html#tailOSCMsgch12.html" >prev-tail</a>] [<a 
href="OSCMsgch13.html" >front</a>] [<a 
href="OSCMsg3.html#OSCMsgch13.html" >up</a>] </p></div>
<!--l. 2635--><p class="noindent" ><a 
 id="tailOSCMsgch13.html"></a>  
</body></html> 
